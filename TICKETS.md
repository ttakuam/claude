# 中古車WEBアプリ - 開発チケット（詳細版）

## 目次
- [Phase 0: プロジェクトセットアップ](#phase-0-プロジェクトセットアップ)
- [Phase 1: インフラ・環境構築](#phase-1-インフラ環境構築)
- [Phase 2: データベース設計・構築](#phase-2-データベース設計構築)
- [Phase 3: 認証システム](#phase-3-認証システム)
- [Phase 4: 基本UI・共通コンポーネント](#phase-4-基本ui共通コンポーネント)
- [Phase 5: ユーザー向け機能](#phase-5-ユーザー向け機能)
- [Phase 6: 管理者向け機能](#phase-6-管理者向け機能)
- [Phase 7: テスト・最適化](#phase-7-テスト最適化)
- [Phase 8: デプロイ・運用準備](#phase-8-デプロイ運用準備)

---

## Phase 0: プロジェクトセットアップ

### #001-A Next.jsプロジェクト作成
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
Next.js 14 (App Router) の新規プロジェクト作成

#### タスク
- [○] `npx create-next-app@latest` 実行
- [○] App Router選択
- [○] プロジェクト名設定

#### 受入条件
- プロジェクトフォルダが作成されていること
- 基本的なNext.js構成ファイルが生成されていること

#### 依存関係
なし

---

### #001-B TypeScript設定
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
TypeScript環境の設定と最適化

#### タスク
- [○] `tsconfig.json` の確認と調整
- [○] strict モードの有効化
- [○] path alias設定 (`@/*`)

#### 受入条件
- TypeScriptのコンパイルエラーがないこと
- path aliasが機能すること

#### 依存関係
#001-A

---

### #001-C Tailwind CSS導入
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
Tailwind CSSのインストールと設定

#### タスク
- [○] Tailwind CSSインストール
- [○] `tailwind.config.js` 設定
- [○] グローバルCSSファイルの設定
- [○] カスタムカラー・テーマ設定

#### 受入条件
- Tailwind CSSが適用されること
- カスタムテーマが反映されること

#### 依存関係
#001-A

---

### #001-D ESLint/Prettier設定
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
コードフォーマッターとリンターの設定

#### タスク
- [○] Prettierインストール
- [○] `.prettierrc` 設定
- [○] ESLintルール調整
- [○] VSCode設定ファイル作成 (`.vscode/settings.json`)

#### 受入条件
- 保存時に自動フォーマットされること
- ESLintエラーが表示されること

#### 依存関係
#001-A

---

### #001-E Lucide Reactインストール
**優先度**: 🟡 Medium | **工数見積**: 0.25h

#### 説明
アイコンライブラリのインストール

#### タスク
- [○] `lucide-react` パッケージインストール
- [○] テストコンポーネントで動作確認

#### 受入条件
- アイコンが表示されること

#### 依存関係
#001-A

---

### #001-F .gitignore設定
**優先度**: 🔴 High | **工数見積**: 0.25h

#### 説明
Gitで管理しないファイルの設定

#### タスク
- [○] `.gitignore` の確認
- [○] `.env.local` 追加
- [○] IDE関連ファイル追加 (`.vscode/*` 除外など)

#### 受入条件
- 環境変数ファイルがGit管理外であること

#### 依存関係
#001-A

---

### #002-A アプリケーションルート構造作成
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
`/app` 配下のルートディレクトリ作成

#### タスク
- [○] `/app/page.tsx` (トップページ)
- [○] `/app/vehicles/[id]/page.tsx` (車両詳細)
- [○] `/app/favorites/page.tsx` (お気に入り)
- [○] `/app/admin/` 配下のディレクトリ作成

#### 受入条件
- 各ルートが作成されていること
- アクセス時に404が出ないこと

#### 依存関係
#001-A

---

### #002-B コンポーネントディレクトリ構造作成
**優先度**: 🔴 High | **工数見積**: 0.25h

#### 説明
再利用可能なコンポーネント用のディレクトリ作成

#### タスク
- [○] `/components/ui/` (基本UIコンポーネント)
- [○] `/components/layout/` (レイアウト)
- [○] `/components/features/` (機能別コンポーネント)

#### 受入条件
- ディレクトリが作成されていること

#### 依存関係
#001-A

---

### #002-C ライブラリ・ユーティリティディレクトリ作成
**優先度**: 🔴 High | **工数見積**: 0.25h

#### 説明
共通ライブラリとユーティリティ関数用のディレクトリ

#### タスク
- [○] `/lib/` フォルダ作成
- [○] `/lib/utils.ts` (ユーティリティ関数)
- [○] `/lib/constants.ts` (定数定義)

#### 受入条件
- ディレクトリが作成されていること

#### 依存関係
#001-A

---

### #002-D 型定義ディレクトリ作成
**優先度**: 🔴 High | **工数見積**: 0.25h

#### 説明
TypeScript型定義用のディレクトリ

#### タスク
- [○] `/types/` フォルダ作成
- [○] `/types/index.ts` (基本型エクスポート)

#### 受入条件
- ディレクトリが作成されていること

#### 依存関係
#001-A

---

### #002-E publicフォルダ整理
**優先度**: 🟡 Medium | **工数見積**: 0.25h

#### 説明
静的ファイル用のフォルダ整理

#### タスク
- [○] `/public/images/` フォルダ作成
- [○] ロゴ画像の配置 (仮)
- [○] favicon設定

#### 受入条件
- 静的ファイルが配信されること

#### 依存関係
#001-A

---

### #002-F README更新
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
プロジェクトREADMEの初期記載

#### タスク
- [○] プロジェクト概要記載
- [○] ディレクトリ構造記載
- [○] セットアップ手順記載

#### 受入条件
- READMEが更新されていること

#### 依存関係
#002-A, #002-B, #002-C, #002-D

---

### #003-A .env.exampleファイル作成
**優先度**: 🔴 High | **工数見積**: 0.25h

#### 説明
環境変数テンプレートファイルの作成

#### タスク
- [○] `.env.example` ファイル作成
- [○] 必要な環境変数をリストアップ

#### 受入条件
- `.env.example` が作成されていること

#### 依存関係
#001-A

---

### #003-B 環境変数のドキュメント作成
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
各環境変数の説明ドキュメント

#### タスク
- [○] READMEに環境変数セクション追加
- [○] 各変数の説明記載
- [○] 取得方法の記載

#### 受入条件
- ドキュメントが作成されていること

#### 依存関係
#003-A

---

## Phase 1: インフラ・環境構築

### #101-A Supabaseプロジェクト作成
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
Supabaseアカウント作成とプロジェクト初期化

#### タスク
- [○] Supabaseアカウント作成
- [○] 新規プロジェクト作成
- [○] プロジェクト名・リージョン設定

#### 受入条件
- Supabaseプロジェクトが作成されていること
- ダッシュボードにアクセスできること

#### 依存関係
なし

---

### #101-B Supabase JavaScript Clientインストール
**優先度**: 🔴 High | **工数見積**: 0.25h

#### 説明
Supabaseクライアントライブラリのインストール

#### タスク
- [○] `@supabase/supabase-js` インストール

#### 受入条件
- パッケージがインストールされていること

#### 依存関係
#001-A

---

### #101-C Supabaseクライアント初期化関数作成
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
Supabase接続用のクライアント関数作成

#### タスク
- [○] `/lib/supabase/client.ts` 作成 (クライアント用)
- [○] `/lib/supabase/server.ts` 作成 (サーバー用)
- [○] 環境変数の読み込み設定

#### 受入条件
- クライアントが正常に初期化されること

#### 依存関係
#101-A, #101-B, #003-A

---

### #101-D Supabase接続テスト
**優先度**: 🔴 High | **工数見積**: 0.25h

#### 説明
データベース接続の動作確認

#### タスク
- [○] テストクエリ実行
- [○] 接続エラーハンドリング確認

#### 受入条件
- データベースに接続できること

#### 依存関係
#101-C

---

### #102-A Supabase Storageバケット作成
**優先度**: 🟡 Medium | **工数見積**: 0.25h

#### 説明
画像保存用の公開バケット作成

#### タスク
- [○] `vehicle-images` バケット作成
- [○] 公開設定

#### 受入条件
- バケットが作成されていること
- 公開アクセスが可能であること

#### 依存関係
#101-A

---

### #102-B Storage画像形式制限設定
**優先度**: 🟡 Medium | **工数見積**: 0.25h

#### 説明
アップロード可能な画像形式の制限

#### タスク
- [○] MIME typeポリシー設定
- [○] ファイルサイズ制限確認

#### 受入条件
- 許可形式のみアップロードできること

#### 依存関係
#102-A

---

### #102-C Storageアップロードヘルパー関数作成
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
画像アップロード用の共通関数

#### タスク
- [○] `/lib/supabase/storage.ts` 作成
- [○] アップロード関数実装
- [○] URL取得関数実装
- [○] 削除関数実装

#### 受入条件
- 画像がアップロードできること
- 公開URLが取得できること

#### 依存関係
#102-A

---

### #103-A Resendアカウント作成
**優先度**: 🟡 Medium | **工数見積**: 0.25h

#### 説明
Resendアカウントの作成とAPIキー取得

#### タスク
- [○] Resendアカウント作成
- [○] APIキー発行

#### 受入条件
- APIキーが取得できていること

#### 依存関係
なし

---

### #103-B Resend SDKインストール
**優先度**: 🟡 Medium | **工数見積**: 0.25h

#### 説明
Resend SDKのインストール

#### タスク
- [○] `resend` パッケージインストール

#### 受入条件
- パッケージがインストールされていること

#### 依存関係
#001-A

---

### #103-C メール送信関数作成
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
問い合わせ通知メール送信関数の実装

#### タスク
- [○] `/lib/email.ts` 作成
- [○] Resendクライアント初期化
- [○] メール送信関数実装

#### 受入条件
- テストメールが送信できること

#### 依存関係
#103-A, #103-B

---

## Phase 2: データベース設計・構築

### #201-A vehiclesテーブル作成
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
車両情報テーブルの作成

#### タスク
- [○] テーブル作成SQLの作成
- [○] カラム定義
- [○] デフォルト値設定
- [○] NOT NULL制約設定

#### 受入条件
- テーブルが作成されていること
- カラムが正しく定義されていること

#### 依存関係
#101-A

---

### #201-B vehiclesテーブルインデックス作成
**優先度**: 🔴 High | **工数見積**: 0.25h

#### 説明
検索パフォーマンス向上のためのインデックス作成

#### タスク
- [○] `vehicle_id` UNIQUE インデックス
- [○] `status` インデックス
- [○] `manufacturer` インデックス
- [○] `price` インデックス

#### 受入条件
- インデックスが作成されていること

#### 依存関係
#201-A

---

### #201-C vehicle_imagesテーブル作成
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
車両画像情報テーブルの作成

#### タスク
- [○] テーブル作成SQLの作成
- [○] カラム定義
- [○] 外部キー設定 (vehicles.id, ON DELETE CASCADE)

#### 受入条件
- テーブルが作成されていること
- 外部キーが正しく設定されていること

#### 依存関係
#201-A

---

### #201-D vehicle_imagesテーブルインデックス作成
**優先度**: 🔴 High | **工数見積**: 0.25h

#### 説明
画像取得パフォーマンス向上のためのインデックス

#### タスク
- [○] `vehicle_id` インデックス作成

#### 受入条件
- インデックスが作成されていること

#### 依存関係
#201-C

---

### #201-E inquiriesテーブル作成
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
問い合わせ情報テーブルの作成

#### タスク
- [○] テーブル作成SQLの作成
- [○] カラム定義
- [○] 外部キー設定 (vehicles.id, ON DELETE SET NULL)

#### 受入条件
- テーブルが作成されていること
- 外部キーが正しく設定されていること

#### 依存関係
#201-A

---

### #201-F inquiriesテーブルインデックス作成
**優先度**: 🔴 High | **工数見積**: 0.25h

#### 説明
問い合わせ一覧取得のためのインデックス

#### タスク
- [○] `created_at` インデックス作成

#### 受入条件
- インデックスが作成されていること

#### 依存関係
#201-E

---

### #202-A vehicles RLSポリシー設定
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
車両テーブルのアクセス制御

#### タスク
- [○] RLS有効化
- [○] SELECT ポリシー作成 (公開車両は誰でも閲覧可)
- [○] INSERT/UPDATE/DELETE ポリシー作成 (認証済みのみ)

#### 受入条件
- 未認証ユーザーが公開車両のみ取得できること
- 認証済みユーザーがCRUD可能であること

#### 依存関係
#201-A

---

### #202-B vehicle_images RLSポリシー設定
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
車両画像テーブルのアクセス制御

#### タスク
- [○] RLS有効化
- [○] SELECT ポリシー作成 (誰でも可)
- [○] INSERT/UPDATE/DELETE ポリシー作成 (認証済みのみ)

#### 受入条件
- 未認証ユーザーが画像を取得できること
- 認証済みユーザーがCRUD可能であること

#### 依存関係
#201-C

---

### #202-C inquiries RLSポリシー設定
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
問い合わせテーブルのアクセス制御

#### タスク
- [○] RLS有効化
- [○] SELECT ポリシー作成 (認証済みのみ)
- [○] INSERT ポリシー作成 (誰でも可)

#### 受入条件
- 誰でも問い合わせを送信できること
- 認証済みユーザーのみ閲覧できること

#### 依存関係
#201-E

---

### #202-D RLSポリシー動作テスト
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
RLSポリシーの動作確認

#### タスク
- [○] 未認証での読み取りテスト
- [○] 認証済みでのCRUDテスト
- [○] 権限エラーの確認

#### 受入条件
- RLSポリシーが正しく動作すること

#### 依存関係
#202-A, #202-B, #202-C

---

### #203-A データベース基本型定義
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
データベーススキーマに対応する基本型定義

#### タスク
- [○] `/types/database.ts` 作成
- [○] `Vehicle` 型定義
- [○] `VehicleImage` 型定義
- [○] `Inquiry` 型定義

#### 受入条件
- 型定義が作成されていること
- TypeScriptエラーがないこと

#### 依存関係
#201-A, #201-C, #201-E

---

### #203-B 検索・フィルター型定義
**優先度**: 🟡 Medium | **工数見積**: 0.25h

#### 説明
検索フィルター用の型定義

#### タスク
- [○] `VehicleFilter` 型定義
- [○] `SearchParams` 型定義

#### 受入条件
- 型定義が作成されていること

#### 依存関係
#203-A

---

### #203-C API型定義
**優先度**: 🟡 Medium | **工数見積**: 0.25h

#### 説明
API Request/Response用の型定義

#### タスク
- [○] `InquiryRequest` 型定義
- [○] `ApiResponse` 型定義

#### 受入条件
- 型定義が作成されていること

#### 依存関係
#203-A

---

## Phase 3: 認証システム

### #301-A Supabase Auth有効化
**優先度**: 🔴 High | **工数見積**: 0.25h

#### 説明
Supabase Authの有効化とメール認証プロバイダ設定

#### タスク
- [○] ダッシュボードでAuth有効化
- [○] メール認証プロバイダ設定
- [○] メールテンプレート確認

#### 受入条件
- Auth機能が有効化されていること

#### 依存関係
#101-A

---

### #301-B 認証ヘルパー関数作成
**優先度**: 🔴 High | **工数見積**: 0.75h

#### 説明
認証操作用のヘルパー関数

#### タスク
- [○] `/lib/auth.ts` 作成
- [○] サインイン関数実装
- [○] サインアウト関数実装
- [○] セッション取得関数実装
- [○] ユーザー情報取得関数実装

#### 受入条件
- 各関数が正常に動作すること

#### 依存関係
#301-A, #101-C

---

### #301-C 初期管理者ユーザー作成
**優先度**: 🔴 High | **工数見積**: 0.25h

#### 説明
テスト用管理者アカウントの作成

#### タスク
- [○] Supabaseダッシュボードからユーザー作成
- [○] 認証情報の記録

#### 受入条件
- 管理者アカウントでログインできること

#### 依存関係
#301-A

---

### #302-A ログインページレイアウト作成
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
ログインページの基本レイアウト

#### タスク
- [○] `/app/admin/login/page.tsx` 作成
- [○] 中央配置のカードレイアウト実装
- [○] ロゴ配置

#### 受入条件
- ページが表示されること
- レスポンシブデザインであること

#### 依存関係
#002-A

---

### #302-B ログインフォームコンポーネント作成
**優先度**: 🔴 High | **工数見積**: 0.75h

#### 説明
メール・パスワード入力フォーム

#### タスク
- [○] `/components/features/auth/LoginForm.tsx` 作成
- [○] メール入力欄
- [○] パスワード入力欄
- [○] ログインボタン

#### 受入条件
- フォームが表示されること
- 入力が可能であること

#### 依存関係
#302-A

---

### #302-C ログインバリデーション実装
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
フォームバリデーション

#### タスク
- [○] メール形式バリデーション
- [○] 必須項目チェック
- [○] エラーメッセージ表示

#### 受入条件
- バリデーションエラーが表示されること

#### 依存関係
#302-B

---

### #302-D ログイン処理実装
**優先度**: 🔴 High | **工数見積**: 0.75h

#### 説明
サインイン処理とリダイレクト

#### タスク
- [○] フォーム送信ハンドラ実装
- [○] Supabase Auth連携
- [○] ログイン成功時のリダイレクト
- [○] エラーハンドリング

#### 受入条件
- ログインが成功すること
- ダッシュボードへリダイレクトされること
- エラー時にメッセージが表示されること

#### 依存関係
#302-C, #301-B

---

### #302-E ログインUI最適化
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
UIの見た目とUXの改善

#### タスク
- [○] ローディング状態の表示
- [○] ボタン無効化制御
- [○] 成功・エラーアニメーション

#### 受入条件
- UIが洗練されていること
- ユーザー体験が良好であること

#### 依存関係
#302-D

---

### #303-A Next.js Middleware作成
**優先度**: 🔴 High | **工数見積**: 0.75h

#### 説明
認証チェック用のミドルウェア

#### タスク
- [○] `middleware.ts` 作成
- [○] セッション確認処理
- [○] `/admin/*` パスのマッチング

#### 受入条件
- ミドルウェアが実行されること

#### 依存関係
#301-B

---

### #303-B 未認証時リダイレクト実装
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
未認証ユーザーのログインページへのリダイレクト

#### タスク
- [○] 未認証判定処理
- [○] リダイレクト処理
- [○] リダイレクト後の遷移先URL保持

#### 受入条件
- 未認証時にログインページへリダイレクトされること

#### 依存関係
#303-A

---

### #303-C 認証済みユーザーのログインページアクセス制御
**優先度**: 🟡 Medium | **工数見積**: 0.25h

#### 説明
ログイン済みユーザーがログインページにアクセスした際の処理

#### タスク
- [○] 認証済み判定
- [○] ダッシュボードへリダイレクト

#### 受入条件
- ログイン済みユーザーがダッシュボードへリダイレクトされること

#### 依存関係
#303-A

---

## Phase 4: 基本UI・共通コンポーネント

### #401-A ユーザー向けヘッダーコンポーネント作成
**優先度**: 🔴 High | **工数見積**: 0.75h

#### 説明
ユーザー向けサイトのヘッダー

#### タスク
- [○] `/components/layout/UserHeader.tsx` 作成
- [○] ロゴ配置
- [○] ナビゲーションメニュー
- [○] お気に入りリンク (件数バッジ付き)

#### 受入条件
- ヘッダーが表示されること
- ナビゲーションが機能すること

#### 依存関係
#001-E

---

### #401-B ユーザー向けフッターコンポーネント作成
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
ユーザー向けサイトのフッター

#### タスク
- [○] `/components/layout/UserFooter.tsx` 作成
- [○] コピーライト表示
- [○] リンク配置

#### 受入条件
- フッターが表示されること

#### 依存関係
なし

---

### #401-C ユーザー向けレイアウト統合
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
ヘッダー・フッターをレイアウトに統合

#### タスク
- [○] `/app/layout.tsx` にヘッダー・フッター追加
- [○] レスポンシブ対応

#### 受入条件
- 全ページでヘッダー・フッターが表示されること

#### 依存関係
#401-A, #401-B

---

### #401-D 管理者向けヘッダーコンポーネント作成
**優先度**: 🔴 High | **工数見積**: 0.75h

#### 説明
管理画面のヘッダー

#### タスク
- [○] `/components/layout/AdminHeader.tsx` 作成
- [○] ロゴ配置
- [○] ユーザー情報表示
- [○] ログアウトボタン

#### 受入条件
- ヘッダーが表示されること
- ログアウトボタンが機能すること

#### 依存関係
#301-B

---

### #401-E 管理者向けサイドバーコンポーネント作成
**優先度**: 🔴 High | **工数見積**: 1h

#### 説明
管理画面のサイドバーメニュー

#### タスク
- [○] `/components/layout/AdminSidebar.tsx` 作成
- [○] ダッシュボードリンク
- [○] 車両管理リンク
- [○] 問い合わせリンク
- [○] CSVインポートリンク
- [○] アクティブ状態のハイライト

#### 受入条件
- サイドバーが表示されること
- ナビゲーションが機能すること
- アクティブページがハイライトされること

#### 依存関係
#001-E

---

### #401-F 管理者向けレイアウト統合
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
管理画面のヘッダー・サイドバーをレイアウトに統合

#### タスク
- [○] `/app/admin/layout.tsx` 作成
- [○] ヘッダー・サイドバー配置
- [○] レスポンシブ対応 (モバイルでサイドバー折りたたみ)

#### 受入条件
- 管理画面で共通レイアウトが表示されること

#### 依存関係
#401-D, #401-E

---

### #402-A Buttonコンポーネント作成
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
再利用可能なボタンコンポーネント

#### タスク
- [○] `/components/ui/Button.tsx` 作成
- [○] バリエーション実装 (primary, secondary, danger)
- [○] サイズ実装 (sm, md, lg)
- [○] ローディング状態

#### 受入条件
- 各バリエーションが機能すること

#### 依存関係
#001-C

---

### #402-B Inputコンポーネント作成
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
再利用可能な入力フィールドコンポーネント

#### タスク
- [○] `/components/ui/Input.tsx` 作成
- [○] テキスト、数値、メール対応
- [○] エラー状態表示
- [○] ラベル・ヘルプテキスト

#### 受入条件
- 各入力タイプが機能すること

#### 依存関係
#001-C

---

### #402-C Cardコンポーネント作成
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
再利用可能なカードコンポーネント

#### タスク
- [○] `/components/ui/Card.tsx` 作成
- [○] ヘッダー・ボディ・フッター構造
- [○] シャドウ・ボーダー設定

#### 受入条件
- カードが表示されること

#### 依存関係
#001-C

---

### #402-D Badgeコンポーネント作成
**優先度**: 🟡 Medium | **工数見積**: 0.25h

#### 説明
再利用可能なバッジコンポーネント

#### タスク
- [○] `/components/ui/Badge.tsx` 作成
- [○] カラーバリエーション (success, warning, danger, info)

#### 受入条件
- バッジが表示されること

#### 依存関係
#001-C

---

### #402-E Modalコンポーネント作成
**優先度**: 🟡 Medium | **工数見積**: 0.75h

#### 説明
再利用可能なモーダルコンポーネント

#### タスク
- [○] `/components/ui/Modal.tsx` 作成
- [○] オーバーレイ表示
- [○] 開閉アニメーション
- [○] 外側クリックで閉じる

#### 受入条件
- モーダルが開閉すること

#### 依存関係
#001-C

---

### #402-F Loaderコンポーネント作成
**優先度**: 🟡 Medium | **工数見積**: 0.25h

#### 説明
再利用可能なローディングコンポーネント

#### タスク
- [○] `/components/ui/Loader.tsx` 作成
- [○] スピナーアニメーション
- [○] サイズバリエーション

#### 受入条件
- ローダーが表示されること

#### 依存関係
#001-C

---

## Phase 5: ユーザー向け機能

### #501-A 車両カードコンポーネント作成
**優先度**: 🔴 High | **工数見積**: 1h

#### 説明
車両一覧用のカードコンポーネント

#### タスク
- [○] `/components/features/vehicle/VehicleCard.tsx` 作成
- [○] サムネイル画像表示
- [○] 車両情報表示 (メーカー、車種、価格、年式、走行距離)
- [○] 修復歴バッジ
- [○] お気に入りボタン配置

#### 受入条件
- カードが表示されること
- レスポンシブデザインであること

#### 依存関係
#402-C, #402-D

---

### #501-B 車両一覧取得関数実装
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
Supabaseから車両一覧を取得する関数

#### タスク
- [○] `/lib/api/vehicles.ts` 作成
- [○] 公開車両取得関数実装
- [○] 画像も同時取得 (JOIN)
- [○] 新着順ソート

#### 受入条件
- 車両一覧が取得できること

#### 依存関係
#101-C, #201-A, #202-A

---

### #501-C ヒーローセクション作成
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
トップページのヒーローセクション

#### タスク
- [○] `/components/features/home/HeroSection.tsx` 作成
- [○] キャッチコピー
- [○] 背景画像
- [○] CTAボタン

#### 受入条件
- ヒーローセクションが表示されること

#### 依存関係
#401-C

---

### #501-D 車両一覧グリッドレイアウト実装
**優先度**: 🔴 High | **工数見積**: 0.75h

#### 説明
トップページの車両一覧表示

#### タスク
- [○] `/app/page.tsx` 更新
- [○] グリッドレイアウト実装 (3列、レスポンシブ)
- [○] 車両データ取得
- [○] カード表示

#### 受入条件
- 車両一覧が表示されること
- レスポンシブで列数が変わること

#### 依存関係
#501-A, #501-B, #501-C

---

### #501-E 車両一覧ローディング状態実装
**優先度**: 🟡 Medium | **工数見積**: 0.25h

#### 説明
データ読み込み中の表示

#### タスク
- [○] ローディングコンポーネント配置
- [○] スケルトンスクリーン実装

#### 受入条件
- ローディング中に適切な表示がされること

#### 依存関係
#501-D, #402-F

---

### #502-A 画像ギャラリーコンポーネント作成
**優先度**: 🔴 High | **工数見積**: 1.5h

#### 説明
車両詳細ページの画像ギャラリー

#### タスク
- [○] `/components/features/vehicle/ImageGallery.tsx` 作成
- [○] メイン画像表示
- [○] サムネイル一覧
- [○] 左右スライドボタン
- [○] サムネイルクリックで切り替え

#### 受入条件
- 画像が切り替わること
- スライドが機能すること

#### 依存関係
#001-E

---

### #502-B 車両スペック表示コンポーネント作成
**優先度**: 🔴 High | **工数見積**: 0.75h

#### 説明
車両詳細情報の表示

#### タスク
- [○] `/components/features/vehicle/VehicleSpec.tsx` 作成
- [○] スペック情報テーブル
- [○] 備考欄表示

#### 受入条件
- スペック情報が表示されること

#### 依存関係
なし

---

### #502-C 車両詳細取得関数実装
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
特定車両の詳細情報取得

#### タスク
- [○] `/lib/api/vehicles.ts` に関数追加
- [○] IDによる車両取得
- [○] 画像も同時取得

#### 受入条件
- 車両詳細が取得できること

#### 依存関係
#501-B

---

### #502-D 車両詳細ページ実装
**優先度**: 🔴 High | **工数見積**: 1h

#### 説明
車両詳細ページのレイアウトとデータ表示

#### タスク
- [○] `/app/vehicles/[id]/page.tsx` 作成
- [○] 2カラムレイアウト実装
- [○] 画像ギャラリー配置
- [○] スペック情報配置
- [○] お気に入りボタン配置

#### 受入条件
- 車両詳細が表示されること
- レスポンシブデザインであること

#### 依存関係
#502-A, #502-B, #502-C

---

### #502-E 車両詳細ページエラーハンドリング
**優先度**: 🟡 Medium | **工数見積**: 0.25h

#### 説明
存在しない車両IDのエラー処理

#### タスク
- [○] 404エラー処理
- [○] エラーメッセージ表示

#### 受入条件
- 存在しない車両で404が表示されること

#### 依存関係
#502-D

---

### #503-A 検索フィルターコンポーネント作成
**優先度**: 🔴 High | **工数見積**: 1.5h

#### 説明
検索・絞り込みフォーム

#### タスク
- [○] `/components/features/search/SearchFilter.tsx` 作成
- [○] メーカードロップダウン
- [○] 価格帯入力 (下限・上限)
- [○] 年式入力 (下限・上限)
- [○] 走行距離入力 (上限)
- [○] 修復歴チェックボックス

#### 受入条件
- フィルターフォームが表示されること
- 入力が可能であること

#### 依存関係
#402-B

---

### #503-B フィルター開閉機能実装
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
詳細検索の開閉トグル

#### タスク
- [○] 開閉ボタン実装
- [○] アニメーション実装
- [○] アクティブフィルター数バッジ表示

#### 受入条件
- フィルターが開閉すること

#### 依存関係
#503-A

---

### #503-C フィルタークリア機能実装
**優先度**: 🟡 Medium | **工数見積**: 0.25h

#### 説明
全フィルターをクリアするボタン

#### タスク
- [○] クリアボタン実装
- [○] フォームリセット処理

#### 受入条件
- クリアボタンでフィルターがリセットされること

#### 依存関係
#503-A

---

### #503-D 絞り込みロジック実装
**優先度**: 🔴 High | **工数見積**: 1h

#### 説明
フィルター条件による車両絞り込み

#### タスク
- [○] クライアントサイドフィルタリング実装
- [○] 複数条件の組み合わせ対応
- [○] リアルタイム更新

#### 受入条件
- 絞り込みが正しく動作すること
- 複数条件が組み合わせられること

#### 依存関係
#503-A, #501-B

---

### #503-E 絞り込み結果件数表示
**優先度**: 🟡 Medium | **工数見積**: 0.25h

#### 説明
フィルター適用後の結果件数表示

#### タスク
- [○] 結果件数カウント
- [○] 表示UI実装

#### 受入条件
- 結果件数が表示されること

#### 依存関係
#503-D

---

### #503-F 検索フィルター統合
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
トップページに検索フィルターを統合

#### タスク
- [○] `/app/page.tsx` に検索フィルター追加
- [○] フィルター状態管理

#### 受入条件
- 検索フィルターが機能すること

#### 依存関係
#503-D, #501-D

---

### #504-A LocalStorage管理フック作成
**優先度**: 🟡 Medium | **工数見積**: 0.75h

#### 説明
お気に入り管理用のカスタムフック

#### タスク
- [○] `/hooks/useFavorites.ts` 作成
- [○] LocalStorageへの保存
- [○] 読み込み処理
- [○] 追加・削除関数

#### 受入条件
- お気に入りが保存・読み込みできること

#### 依存関係
なし

---

### #504-B お気に入りボタンコンポーネント作成
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
ハートアイコンのお気に入りボタン

#### タスク
- [○] `/components/features/favorite/FavoriteButton.tsx` 作成
- [○] ハートアイコン (塗りつぶし/空)
- [○] クリック時の追加・削除処理

#### 受入条件
- ボタンが機能すること

#### 依存関係
#504-A, #001-E

---

### #504-C ヘッダーお気に入り件数バッジ実装
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
ヘッダーのお気に入りリンクに件数バッジ表示

#### タスク
- [○] ヘッダーコンポーネント更新
- [○] 件数カウント表示
- [○] リアルタイム更新

#### 受入条件
- 件数バッジが表示されること
- お気に入り追加・削除時に更新されること

#### 依存関係
#504-A, #401-A

---

### #504-D お気に入りページ実装
**優先度**: 🟡 Medium | **工数見積**: 1h

#### 説明
お気に入り一覧ページ

#### タスク
- [○] `/app/favorites/page.tsx` 作成
- [○] お気に入り車両取得
- [○] グリッドレイアウト実装
- [○] 空の状態表示

#### 受入条件
- お気に入り車両が表示されること
- 空の場合にメッセージが表示されること

#### 依存関係
#504-A, #501-A

---

### #504-E 車両カード・詳細へのお気に入りボタン統合
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
既存の車両カード・詳細ページにお気に入りボタンを追加

#### タスク
- [○] VehicleCardにボタン追加
- [○] 車両詳細ページにボタン追加

#### 受入条件
- 両ページでお気に入り機能が使えること

#### 依存関係
#504-B, #501-A, #502-D

---

### #505-A 問い合わせフォームコンポーネント作成
**優先度**: 🔴 High | **工数見積**: 1h

#### 説明
問い合わせ/来店予約フォーム

#### タスク
- [○] `/components/features/inquiry/InquiryForm.tsx` 作成
- [○] 問い合わせ種類選択
- [○] お名前入力
- [○] メールアドレス入力
- [○] 電話番号入力
- [○] メッセージ入力

#### 受入条件
- フォームが表示されること
- 入力が可能であること

#### 依存関係
#402-B

---

### #505-B 問い合わせフォームバリデーション実装
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
フォームバリデーション

#### タスク
- [○] 必須項目チェック
- [○] メール形式チェック
- [○] エラーメッセージ表示

#### 受入条件
- バリデーションエラーが表示されること

#### 依存関係
#505-A

---

### #505-C 問い合わせAPI実装
**優先度**: 🔴 High | **工数見積**: 1h

#### 説明
問い合わせ送信APIエンドポイント

#### タスク
- [○] `/app/api/inquiries/route.ts` 作成
- [○] リクエストバリデーション
- [○] データベース保存処理
- [○] レスポンス返却

#### 受入条件
- APIが正常に動作すること
- データベースに保存されること

#### 依存関係
#201-E, #202-C

---

### #505-D 問い合わせメール通知実装
**優先度**: 🔴 High | **工数見積**: 0.75h

#### 説明
管理者へのメール通知

#### タスク
- [○] メールテンプレート作成
- [○] Resend送信処理実装
- [○] 問い合わせAPI内で呼び出し

#### 受入条件
- 問い合わせ時にメールが送信されること

#### 依存関係
#505-C, #103-C

---

### #505-E 問い合わせフォーム送信処理実装
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
フォーム送信ハンドラ

#### タスク
- [○] フォーム送信関数実装
- [○] API呼び出し
- [○] ローディング状態管理
- [○] エラーハンドリング

#### 受入条件
- フォームが送信できること
- エラー時にメッセージが表示されること

#### 依存関係
#505-B, #505-C

---

### #505-F 問い合わせ送信完了メッセージ実装
**優先度**: 🟡 Medium | **工数見積**: 0.25h

#### 説明
送信成功時のフィードバック

#### タスク
- [○] 成功メッセージ表示
- [○] フォームリセット

#### 受入条件
- 送信後にメッセージが表示されること
- フォームがリセットされること

#### 依存関係
#505-E

---

### #505-G 問い合わせフォーム車両詳細ページ統合
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
車両詳細ページにフォームを配置

#### タスク
- [○] 車両詳細ページの右カラムにフォーム配置
- [○] stickyポジション実装
- [○] 対象車両情報の自動設定

#### 受入条件
- フォームが表示されること
- スクロール時にstickyで追従すること

#### 依存関係
#505-E, #502-D

---

## Phase 6: 管理者向け機能

### #601-A 統計情報取得関数実装
**優先度**: 🔴 High | **工数見積**: 0.75h

#### 説明
ダッシュボード用の統計データ取得

#### タスク
- [○] `/lib/api/dashboard.ts` 作成
- [○] 総車両数取得
- [○] 公開中車両数取得
- [○] 成約済車両数取得
- [○] 問い合わせ総数取得

#### 受入条件
- 統計データが取得できること

#### 依存関係
#201-A, #201-E

---

### #601-B 統計カードコンポーネント作成
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
統計情報表示用のカードコンポーネント

#### タスク
- [○] `/components/features/dashboard/StatCard.tsx` 作成
- [○] アイコン付きカードデザイン
- [○] 数値とラベル表示

#### 受入条件
- カードが表示されること

#### 依存関係
#402-C, #001-E

---

### #601-C クイックアクションボタン実装
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
よく使う機能へのショートカットボタン

#### タスク
- [○] 新規車両登録ボタン
- [○] CSVインポートボタン
- [○] 問い合わせ確認ボタン
- [○] 各リンク設定

#### 受入条件
- ボタンが表示されること
- 遷移が機能すること

#### 依存関係
#402-A

---

### #601-D 最近の問い合わせ表示コンポーネント作成
**優先度**: 🟡 Medium | **工数見積**: 0.75h

#### 説明
最新5件の問い合わせ一覧

#### タスク
- [○] `/components/features/dashboard/RecentInquiries.tsx` 作成
- [○] 問い合わせカード表示
- [○] 最新5件取得

#### 受入条件
- 最新問い合わせが表示されること

#### 依存関係
#201-E

---

### #601-E ダッシュボードページ実装
**優先度**: 🔴 High | **工数見積**: 1h

#### 説明
管理者ダッシュボードページ

#### タスク
- [○] `/app/admin/dashboard/page.tsx` 作成
- [○] 統計カード配置
- [○] クイックアクション配置
- [○] 最近の問い合わせ配置
- [○] レイアウト調整

#### 受入条件
- ダッシュボードが表示されること
- 統計情報が正しく表示されること

#### 依存関係
#601-A, #601-B, #601-C, #601-D

---

### #602-A 車両一覧テーブルコンポーネント作成
**優先度**: 🔴 High | **工数見積**: 1.5h

#### 説明
管理者向け車両一覧テーブル

#### タスク
- [○] `/components/features/admin/VehicleTable.tsx` 作成
- [○] サムネイル画像列
- [○] 車両ID列
- [○] 車両情報列
- [○] 価格列
- [○] ステータス列
- [○] アクション列

#### 受入条件
- テーブルが表示されること
- レスポンシブ対応されていること

#### 依存関係
#402-D

---

### #602-B 車両削除確認ダイアログ実装
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
削除前の確認モーダル

#### タスク
- [○] 確認ダイアログコンポーネント作成
- [○] 削除処理実装

#### 受入条件
- 削除前に確認が表示されること
- 確認後に削除されること

#### 依存関係
#402-E

---

### #602-C ステータス切り替え機能実装
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
公開中⇔成約済の切り替え

#### タスク
- [○] ステータス切り替え関数実装
- [○] ボタンUI実装

#### 受入条件
- ステータスが切り替わること

#### 依存関係
#501-B

---

### #602-D 車両一覧ページ実装
**優先度**: 🔴 High | **工数見積**: 1h

#### 説明
管理者向け車両一覧ページ

#### タスク
- [○] `/app/admin/vehicles/page.tsx` 作成
- [○] 車両データ取得
- [○] テーブル表示
- [○] 新規登録ボタン配置

#### 受入条件
- 全車両が一覧表示されること
- 操作ボタンが機能すること

#### 依存関係
#602-A, #602-B, #602-C

---

### #603-A 車両基本情報フォームコンポーネント作成
**優先度**: 🔴 High | **工数見積**: 1.5h

#### 説明
車両登録・編集用のフォーム

#### タスク
- [○] `/components/features/admin/VehicleForm.tsx` 作成
- [○] 車両ID入力
- [○] メーカー入力
- [○] 車種入力
- [○] グレード入力
- [○] 価格入力
- [○] 年式入力
- [○] 走行距離入力
- [○] 車検期限入力
- [○] 修復歴チェックボックス
- [○] ステータス選択
- [○] 備考テキストエリア

#### 受入条件
- フォームが表示されること
- 全項目が入力可能であること

#### 依存関係
#402-B

---

### #603-B 車両フォームバリデーション実装
**優先度**: 🔴 High | **工数見積**: 0.75h

#### 説明
フォームバリデーション

#### タスク
- [○] 必須項目チェック
- [○] 数値型チェック
- [○] 車両ID重複チェック
- [○] エラーメッセージ表示

#### 受入条件
- バリデーションエラーが表示されること

#### 依存関係
#603-A

---

### #603-C 画像アップロードコンポーネント作成
**優先度**: 🔴 High | **工数見積**: 1.5h

#### 説明
複数画像アップロード機能

#### タスク
- [○] `/components/features/admin/ImageUpload.tsx` 作成
- [○] ドラッグ&ドロップエリア
- [○] ファイル選択ボタン
- [○] プレビュー表示
- [○] 個別削除ボタン
- [○] 複数画像対応

#### 受入条件
- 画像がアップロードできること
- プレビューが表示されること
- 削除が可能であること

#### 依存関係
なし

---

### #603-D 画像Storageアップロード処理実装
**優先度**: 🔴 High | **工数見積**: 0.75h

#### 説明
Supabase Storageへの画像アップロード

#### タスク
- [○] アップロード関数実装
- [○] 複数ファイル一括アップロード
- [○] エラーハンドリング

#### 受入条件
- 画像がStorageにアップロードされること
- URLが取得できること

#### 依存関係
#102-C

---

### #603-E 車両登録API実装
**優先度**: 🔴 High | **工数見積**: 1h

#### 説明
車両登録APIエンドポイント

#### タスク
- [○] `/app/api/admin/vehicles/route.ts` 作成
- [○] バリデーション
- [○] vehiclesテーブル登録
- [○] vehicle_imagesテーブル登録
- [○] トランザクション処理

#### 受入条件
- 車両が登録できること
- 画像も同時に登録されること

#### 依存関係
#201-A, #201-C

---

### #603-F 車両登録ページ実装
**優先度**: 🔴 High | **工数見積**: 1h

#### 説明
新規車両登録ページ

#### タスク
- [○] `/app/admin/vehicles/new/page.tsx` 作成
- [○] フォーム配置
- [○] 画像アップロード配置
- [○] 送信処理実装
- [○] 成功時のリダイレクト

#### 受入条件
- 車両が登録できること
- 登録後に一覧へリダイレクトされること

#### 依存関係
#603-A, #603-B, #603-C, #603-D, #603-E

---

### #604-A 車両データ取得と初期値設定
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
編集対象の車両データ取得

#### タスク
- [○] 車両ID取得
- [○] 車両データ取得
- [○] フォーム初期値設定

#### 受入条件
- 既存データがフォームに表示されること

#### 依存関係
#502-C

---

### #604-B 既存画像表示・削除機能実装
**優先度**: 🔴 High | **工数見積**: 0.75h

#### 説明
既存画像の管理

#### タスク
- [○] 既存画像一覧表示
- [○] 削除マーク機能
- [○] Storage削除処理

#### 受入条件
- 既存画像が表示されること
- 削除が可能であること

#### 依存関係
#603-C

---

### #604-C 車両更新API実装
**優先度**: 🔴 High | **工数見積**: 1h

#### 説明
車両更新APIエンドポイント

#### タスク
- [○] `/app/api/admin/vehicles/[id]/route.ts` 作成
- [○] PUT/PATCH リクエスト処理
- [○] 画像追加・削除処理
- [○] トランザクション処理

#### 受入条件
- 車両が更新できること
- 画像の追加・削除ができること

#### 依存関係
#603-E

---

### #604-D 車両編集ページ実装
**優先度**: 🔴 High | **工数見積**: 1h

#### 説明
車両編集ページ

#### タスク
- [○] `/app/admin/vehicles/[id]/edit/page.tsx` 作成
- [○] フォーム配置 (VehicleForm再利用)
- [○] 既存画像表示
- [○] 更新処理実装
- [○] 成功時のリダイレクト

#### 受入条件
- 車両が編集できること
- 更新後に一覧へリダイレクトされること

#### 依存関係
#604-A, #604-B, #604-C

---

### #605-A CSVファイル選択コンポーネント作成
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
CSVファイルアップロード

#### タスク
- [○] `/components/features/admin/CSVUpload.tsx` 作成
- [○] ファイル選択ボタン
- [○] ファイル名表示

#### 受入条件
- ファイルが選択できること

#### 依存関係
なし

---

### #605-B CSVパース処理実装
**優先度**: 🟡 Medium | **工数見積**: 0.75h

#### 説明
CSVファイルのパース

#### タスク
- [○] CSVパースライブラリインストール (papaparse等)
- [○] パース関数実装
- [○] ヘッダー行検証

#### 受入条件
- CSVがパースできること

#### 依存関係
#605-A

---

### #605-C CSVプレビュー表示実装
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
インポート前のプレビュー表示

#### タスク
- [○] プレビューテーブル実装
- [○] 最初の5件表示
- [○] 列ヘッダー表示

#### 受入条件
- プレビューが表示されること

#### 依存関係
#605-B

---

### #605-D CSVバリデーション実装
**優先度**: 🟡 Medium | **工数見積**: 0.75h

#### 説明
CSVデータのバリデーション

#### タスク
- [○] 必須列チェック
- [○] データ型チェック
- [○] エラー行の特定

#### 受入条件
- バリデーションエラーが表示されること

#### 依存関係
#605-B

---

### #605-E CSVインポートAPI実装
**優先度**: 🟡 Medium | **工数見積**: 1.5h

#### 説明
一括登録APIエンドポイント

#### タスク
- [○] `/app/api/admin/import/route.ts` 作成
- [○] 一括INSERT処理
- [○] エラーハンドリング
- [○] 成功・失敗件数カウント

#### 受入条件
- CSVデータが一括登録できること
- エラー行がスキップされること

#### 依存関係
#201-A

---

### #605-F インポート結果表示実装
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
インポート完了後の結果表示

#### タスク
- [○] 成功件数表示
- [○] 失敗件数表示
- [○] エラー詳細表示

#### 受入条件
- 結果が表示されること

#### 依存関係
#605-E

---

### #605-G サンプルCSVダウンロード機能実装
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
CSVフォーマットのサンプルダウンロード

#### タスク
- [○] サンプルCSVファイル作成
- [○] ダウンロードボタン実装

#### 受入条件
- サンプルCSVがダウンロードできること

#### 依存関係
なし

---

### #605-H CSVインポートページ実装
**優先度**: 🟡 Medium | **工数見積**: 1h

#### 説明
CSVインポートページ

#### タスク
- [○] `/app/admin/import/page.tsx` 作成
- [○] ファイル選択配置
- [○] プレビュー配置
- [○] インポートボタン配置
- [○] 結果表示配置

#### 受入条件
- CSVインポートが実行できること

#### 依存関係
#605-A, #605-C, #605-E, #605-F

---

### #606-A 問い合わせ一覧取得関数実装
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
全問い合わせの取得

#### タスク
- [○] `/lib/api/inquiries.ts` 作成
- [○] 問い合わせ一覧取得関数
- [○] 車両情報もJOIN
- [○] 日時降順ソート

#### 受入条件
- 問い合わせ一覧が取得できること

#### 依存関係
#201-E

---

### #606-B 問い合わせカードコンポーネント作成
**優先度**: 🔴 High | **工数見積**: 1h

#### 説明
問い合わせ表示用のカードコンポーネント

#### タスク
- [○] `/components/features/admin/InquiryCard.tsx` 作成
- [○] お客様名表示
- [○] メールアドレス表示 (mailtoリンク)
- [○] 電話番号表示 (telリンク)
- [○] 問い合わせ種類バッジ
- [○] 対象車両情報表示
- [○] メッセージ表示
- [○] 受信日時表示

#### 受入条件
- カードが表示されること
- メール・電話番号がクリック可能であること

#### 依存関係
#402-C, #402-D

---

### #606-C 問い合わせ一覧ページ実装
**優先度**: 🔴 High | **工数見積**: 1h

#### 説明
問い合わせ一覧ページ

#### タスク
- [○] `/app/admin/inquiries/page.tsx` 作成
- [○] 問い合わせデータ取得
- [○] カード一覧表示
- [○] ソート機能

#### 受入条件
- 問い合わせ一覧が表示されること
- 日時降順でソートされていること

#### 依存関係
#606-A, #606-B

---

## Phase 7: テスト・最適化

### #701-A Next.js Imageコンポーネント導入
**優先度**: 🟡 Medium | **工数見積**: 1h

#### 説明
画像の最適化

#### タスク
- [○] 全画像をNext.js Imageに置き換え
- [○] widthとheight設定
- [○] priority設定 (ファーストビュー画像)

#### 受入条件
- 画像が最適化されていること

#### 依存関係
全Phase 5, 6

---

### #701-B 画像遅延読み込み実装
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
スクロール時の画像読み込み

#### タスク
- [○] loading="lazy" 設定
- [○] Intersection Observer活用

#### 受入条件
- スクロール時に画像が読み込まれること

#### 依存関係
#701-A

---

### #701-C データベースクエリ最適化
**優先度**: 🟡 Medium | **工数見積**: 1h

#### 説明
クエリパフォーマンスの改善

#### タスク
- [○] 不要なカラムの取得削除 (SELECT *)
- [○] JOIN最適化
- [○] インデックス利用確認

#### 受入条件
- クエリが高速化されること

#### 依存関係
全Phase 5, 6

---

### #701-D キャッシュ戦略実装
**優先度**: 🟡 Medium | **工数見積**: 1h

#### 説明
Next.jsのキャッシュ活用

#### タスク
- [○] revalidate設定
- [○] 静的生成の活用
- [○] ISR設定

#### 受入条件
- ページが高速に表示されること

#### 依存関係
全Phase 5

---

### #701-E バンドルサイズ削減
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
JavaScriptバンドルの最適化

#### タスク
- [○] 不要なパッケージ削除
- [○] 動的インポート活用
- [○] バンドルサイズ分析

#### 受入条件
- バンドルサイズが削減されること

#### 依存関係
全Phase 5, 6

---

### #701-F Lighthouseパフォーマンステスト
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
パフォーマンススコア確認

#### タスク
- [○] Lighthouse実行
- [○] Performance 80以上確認
- [○] 改善項目の特定

#### 受入条件
- Performance 80以上であること

#### 依存関係
#701-A, #701-B, #701-C, #701-D, #701-E

---

### #702-A スマートフォン表示確認
**優先度**: 🟡 Medium | **工数見積**: 1h

#### 説明
モバイルデバイスでの表示確認

#### タスク
- [○] 全ページのモバイル表示確認
- [○] レイアウト崩れ修正
- [○] フォントサイズ調整

#### 受入条件
- スマートフォンで正しく表示されること

#### 依存関係
全Phase 5, 6

---

### #702-B タブレット表示確認
**優先度**: 🟡 Medium | **工数見積**: 0.75h

#### 説明
タブレットデバイスでの表示確認

#### タスク
- [○] 全ページのタブレット表示確認
- [○] レイアウト調整

#### 受入条件
- タブレットで正しく表示されること

#### 依存関係
全Phase 5, 6

---

### #702-C デスクトップ表示確認
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
デスクトップでの表示確認

#### タスク
- [○] 大画面での表示確認
- [○] 最大幅設定確認

#### 受入条件
- デスクトップで正しく表示されること

#### 依存関係
全Phase 5, 6

---

### #702-D ブレークポイント調整
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
レスポンシブブレークポイントの最適化

#### タスク
- [○] Tailwind breakpoints確認
- [○] カスタムブレークポイント設定
- [○] 各ブレークポイントでの表示確認

#### 受入条件
- 全デバイスで最適な表示であること

#### 依存関係
#702-A, #702-B, #702-C

---

### #702-E タッチ操作最適化
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
モバイルでのタッチ操作改善

#### タスク
- [○] ボタンサイズ調整 (44px以上)
- [○] タッチフィードバック実装
- [○] スワイプジェスチャー確認

#### 受入条件
- タッチ操作が快適であること

#### 依存関係
#702-A

---

### #703-A Chrome動作確認
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
Chrome最新版での動作確認

#### タスク
- [○] 全機能の動作確認
- [○] コンソールエラー確認

#### 受入条件
- Chromeで正常に動作すること

#### 依存関係
全Phase 5, 6

---

### #703-B Firefox動作確認
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
Firefox最新版での動作確認

#### タスク
- [○] 全機能の動作確認
- [○] レイアウト確認

#### 受入条件
- Firefoxで正常に動作すること

#### 依存関係
全Phase 5, 6

---

### #703-C Safari動作確認
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
Safari最新版での動作確認

#### タスク
- [○] 全機能の動作確認
- [○] iOS Safari確認

#### 受入条件
- Safariで正常に動作すること

#### 依存関係
全Phase 5, 6

---

### #703-D Edge動作確認
**優先度**: 🟡 Medium | **工数見積**: 0.25h

#### 説明
Edge最新版での動作確認

#### タスク
- [○] 全機能の動作確認

#### 受入条件
- Edgeで正常に動作すること

#### 依存関係
全Phase 5, 6

---

### #704-A E2Eテスト環境セットアップ
**優先度**: 🟢 Low | **工数見積**: 1h

#### 説明
Playwrightのインストールと設定

#### タスク
- [○] Playwrightインストール
- [○] 設定ファイル作成
- [○] テストディレクトリ作成

#### 受入条件
- Playwrightが実行できること

#### 依存関係
全Phase 5, 6

---

### #704-B ユーザー向け機能E2Eテスト作成
**優先度**: 🟢 Low | **工数見積**: 2.5h

#### 説明
ユーザー向け機能のテストシナリオ

#### タスク
- [○] 車両一覧表示テスト
- [○] 車両詳細表示テスト
- [○] 検索・絞り込みテスト
- [○] お気に入り機能テスト
- [○] 問い合わせ送信テスト

#### 受入条件
- 全テストがパスすること

#### 依存関係
#704-A

---

### #704-C 管理者向け機能E2Eテスト作成
**優先度**: 🟢 Low | **工数見積**: 2.5h

#### 説明
管理者向け機能のテストシナリオ

#### タスク
- [○] ログインテスト
- [○] 車両登録テスト
- [○] 車両編集テスト
- [○] 車両削除テスト
- [○] CSVインポートテスト
- [○] 問い合わせ確認テスト

#### 受入条件
- 全テストがパスすること

#### 依存関係
#704-A

---

## Phase 8: デプロイ・運用準備

### #801-A Vercelプロジェクト作成
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
Vercelアカウントとプロジェクト作成

#### タスク
- [○] Vercelアカウント作成
- [○] 新規プロジェクト作成
- [○] GitHubリポジトリ連携

#### 受入条件
- プロジェクトが作成されていること

#### 依存関係
なし

---

### #801-B Vercel環境変数設定
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
本番環境の環境変数設定

#### タスク
- [○] Supabase環境変数設定
- [○] Resend環境変数設定
- [○] その他環境変数設定

#### 受入条件
- 全環境変数が設定されていること

#### 依存関係
#801-A

---

### #801-C Vercelビルド設定確認
**優先度**: 🔴 High | **工数見積**: 0.25h

#### 説明
ビルド設定の確認

#### タスク
- [○] ビルドコマンド確認
- [○] 出力ディレクトリ確認
- [○] Node.jsバージョン確認

#### 受入条件
- ビルドが成功すること

#### 依存関係
#801-A

---

### #801-D 初回デプロイ実行
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
Vercelへの初回デプロイ

#### タスク
- [○] デプロイ実行
- [○] デプロイログ確認
- [○] 本番URLアクセス確認

#### 受入条件
- デプロイが成功すること
- 本番URLにアクセスできること

#### 依存関係
#801-B, #801-C

---

### #801-E カスタムドメイン設定 (オプション)
**優先度**: 🟢 Low | **工数見積**: 0.5h

#### 説明
独自ドメインの設定

#### タスク
- [○] ドメイン追加
- [○] DNS設定
- [○] SSL証明書確認

#### 受入条件
- カスタムドメインでアクセスできること

#### 依存関係
#801-D

---

### #802-A 本番Supabaseプロジェクト作成
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
本番環境用のSupabaseプロジェクト

#### タスク
- [○] 本番用プロジェクト作成
- [○] リージョン選択

#### 受入条件
- 本番プロジェクトが作成されていること

#### 依存関係
なし

---

### #802-B 本番データベーステーブル作成
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
本番DBへのテーブル作成

#### タスク
- [○] 開発環境のSQLエクスポート
- [○] 本番環境へ適用
- [○] テーブル確認

#### 受入条件
- 全テーブルが作成されていること

#### 依存関係
#802-A, #201-A, #201-C, #201-E

---

### #802-C 本番RLSポリシー適用
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
本番DBへのRLSポリシー適用

#### タスク
- [○] RLSポリシーSQLエクスポート
- [○] 本番環境へ適用
- [○] 動作確認

#### 受入条件
- RLSポリシーが正しく動作すること

#### 依存関係
#802-B, #202-A, #202-B, #202-C

---

### #802-D 本番初期管理者ユーザー作成
**優先度**: 🔴 High | **工数見積**: 0.25h

#### 説明
本番環境の管理者アカウント作成

#### タスク
- [○] 管理者ユーザー作成
- [○] 認証情報の安全な保管

#### 受入条件
- 管理者でログインできること

#### 依存関係
#802-A

---

### #802-E 本番バックアップ設定確認
**優先度**: 🟡 Medium | **工数見積**: 0.25h

#### 説明
自動バックアップの確認

#### タスク
- [○] バックアップ設定確認
- [○] リストア手順確認

#### 受入条件
- バックアップが有効であること

#### 依存関係
#802-A

---

### #803-A 本番Resend設定
**優先度**: 🔴 High | **工数見積**: 0.25h

#### 説明
本番用Resend APIキー設定

#### タスク
- [○] 本番用APIキー発行
- [○] Vercel環境変数に設定

#### 受入条件
- APIキーが設定されていること

#### 依存関係
#103-A

---

### #803-B 送信ドメイン設定
**優先度**: 🔴 High | **工数見積**: 0.25h

#### 説明
メール送信元ドメインの設定

#### タスク
- [○] ドメイン追加
- [○] DNS設定 (SPF, DKIM)
- [○] 検証

#### 受入条件
- ドメイン検証が完了していること

#### 依存関係
#803-A

---

### #803-C 本番メール送信テスト
**優先度**: 🔴 High | **工数見積**: 0.25h

#### 説明
本番環境でのメール送信確認

#### タスク
- [○] テスト問い合わせ送信
- [○] メール受信確認
- [○] 迷惑メール判定確認

#### 受入条件
- メールが正しく送信・受信されること

#### 依存関係
#803-B, #801-D

---

### #804-A README更新
**優先度**: 🟡 Medium | **工数見積**: 1h

#### 説明
プロジェクトREADMEの完成

#### タスク
- [○] プロジェクト概要更新
- [○] セットアップ手順詳細化
- [○] 環境変数の説明
- [○] ビルド・デプロイ手順
- [○] 技術スタック記載

#### 受入条件
- READMEが完成していること

#### 依存関係
全チケット

---

### #804-B 管理者マニュアル作成
**優先度**: 🟡 Medium | **工数見積**: 1.5h

#### 説明
管理者向け操作マニュアル

#### タスク
- [○] ログイン方法
- [○] 車両登録方法
- [○] 車両編集・削除方法
- [○] CSVインポート方法
- [○] 問い合わせ対応方法
- [○] スクリーンショット追加

#### 受入条件
- マニュアルが作成されていること

#### 依存関係
全Phase 6

---

### #804-C トラブルシューティングガイド作成
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
よくある問題と解決方法

#### タスク
- [○] よくあるエラー一覧
- [○] 解決方法記載
- [○] 問い合わせ先記載

#### 受入条件
- ガイドが作成されていること

#### 依存関係
全チケット

---

### #805-A 環境変数セキュリティチェック
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
環境変数の漏洩チェック

#### タスク
- [○] `.env.local` がGit管理外か確認
- [○] コード内にハードコードされていないか確認
- [○] 本番環境変数の確認

#### 受入条件
- 環境変数が安全に管理されていること

#### 依存関係
全チケット

---

### #805-B RLSポリシー動作確認
**優先度**: 🔴 High | **工数見積**: 0.75h

#### 説明
本番環境でのRLS動作確認

#### タスク
- [○] 未認証でのアクセステスト
- [○] 認証済みでのアクセステスト
- [○] 権限外操作のテスト

#### 受入条件
- RLSが正しく動作していること

#### 依存関係
#802-C, #801-D

---

### #805-C XSS/CSRF対策確認
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
基本的な脆弱性対策の確認

#### タスク
- [○] React自動エスケープ確認
- [○] dangerouslySetInnerHTML使用箇所確認
- [○] Next.js CSRF保護確認

#### 受入条件
- XSS/CSRF対策が実装されていること

#### 依存関係
全チケット

---

### #805-D HTTPS通信確認
**優先度**: 🔴 High | **工数見積**: 0.25h

#### 説明
全通信のHTTPS化確認

#### タスク
- [○] Vercel HTTPS確認
- [○] 混在コンテンツ確認

#### 受入条件
- 全通信がHTTPSであること

#### 依存関係
#801-D

---

### #805-E ファイルアップロード制限確認
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
画像アップロードのセキュリティ確認

#### タスク
- [○] MIME type制限確認
- [○] ファイルサイズ制限確認
- [○] 不正ファイルのテスト

#### 受入条件
- 画像のみアップロードできること

#### 依存関係
#102-B, #603-C

---

### #805-F 認証・認可動作確認
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
認証システムの最終確認

#### タスク
- [○] ログイン・ログアウトテスト
- [○] セッション管理確認
- [○] 未認証時のリダイレクト確認

#### 受入条件
- 認証が正しく動作していること

#### 依存関係
#303-A, #801-D

---

### #806-A 本番環境最終動作確認
**優先度**: 🔴 High | **工数見積**: 1.5h

#### 説明
全機能の本番環境での動作確認

#### タスク
- [○] ユーザー向け全機能テスト
- [○] 管理者向け全機能テスト
- [○] エラーハンドリング確認
- [○] パフォーマンス確認

#### 受入条件
- 全機能が正常に動作すること

#### 依存関係
全チケット

---

### #806-B パフォーマンスモニタリング設定
**優先度**: 🟡 Medium | **工数見積**: 0.5h

#### 説明
Vercel Analyticsの設定

#### タスク
- [○] Vercel Analytics有効化
- [○] ダッシュボード確認

#### 受入条件
- パフォーマンスがモニタリングされていること

#### 依存関係
#801-D

---

### #806-C エラートラッキング設定 (オプション)
**優先度**: 🟢 Low | **工数見積**: 1h

#### 説明
Sentryなどのエラートラッキングツール導入

#### タスク
- [○] Sentryアカウント作成
- [○] SDK導入
- [○] エラーテスト

#### 受入条件
- エラーがトラッキングされること

#### 依存関係
#801-D

---

### #806-D 本番リリース承認
**優先度**: 🔴 High | **工数見積**: 0.5h

#### 説明
最終チェックとリリース承認

#### タスク
- [○] 全チケット完了確認
- [○] チェックリスト確認
- [○] ステークホルダー承認

#### 受入条件
- リリース承認が得られること

#### 依存関係
全チケット

---

## サマリー

### 総チケット数: 186

### フェーズ別内訳
- Phase 0: 12チケット (プロジェクトセットアップ)
- Phase 1: 11チケット (インフラ・環境構築)
- Phase 2: 13チケット (データベース設計・構築)
- Phase 3: 11チケット (認証システム)
- Phase 4: 10チケット (基本UI・共通コンポーネント)
- Phase 5: 30チケット (ユーザー向け機能)
- Phase 6: 38チケット (管理者向け機能)
- Phase 7: 16チケット (テスト・最適化)
- Phase 8: 25チケット (デプロイ・運用準備)

### 優先度別内訳
- 🔴 High: 92チケット
- 🟡 Medium: 58チケット
- 🟢 Low: 6チケット

### 推奨開発順序
1. **Phase 0** → 基盤整備 (順次実行)
2. **Phase 1** → インフラ構築 (順次実行)
3. **Phase 2** → データベース構築 (順次実行)
4. **Phase 3** → 認証実装 (順次実行)
5. **Phase 4** → UI基盤 (一部並行可能)
6. **Phase 5** → ユーザー機能 (一部並行可能)
7. **Phase 6** → 管理者機能 (一部並行可能)
8. **Phase 7** → テスト・最適化 (並行可能)
9. **Phase 8** → デプロイ準備 (順次実行)

### チケット命名規則
- `#XXX-Y` 形式
- XXX: フェーズ番号 (001-806)
- Y: サブタスク識別子 (A, B, C...)

---

**作成日**: 2024年2月
**バージョン**: 2.0 (詳細分割版)
